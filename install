#!/bin/bash -x

__deploy=( bash git inputrc python ruby tmux vim )

if [ -e ~/.not_a_server ]; then
  cd /etc/bash_completion.d
  [ -f /etc/bash_completion.d/bd ] || ln -s ~/src/opensource/vigneshwaranr/bd/bash_completion.d/bd bd
  __deploy+=( ag dir_colors i3 nvim pentadactyl vimperator pterosaur )
else
  echo "Only installing for a server; otherwise, please touch .not_a_server in your home directory."
fi

cd ~
[ -L ~/bin ] && rm ~/bin
ln -s ~/dotfiles/bin bin

for dir in "${__deploy[@]}"; do
  for path in ~/dotfiles/"${dir}"/*; do
    file_name=`basename "${path}"`
    [ -L ."${file_name}" ] && rm ."${file_name}"
    ln -s "${path}" ."${file_name}"
  done
done

#In /home/james/src/opensource/junegunn/fzf/shell/key-bindings.bash, change:

  ## CTRL-R - Paste the selected command from history into the command line
  #bind '"\C-r": " \C-e\C-u$(__fzf_history__)\e\C-e\e^\er"'

  ## ALT-C - cd into the selected directory
  #bind '"\ec": " \C-e\C-u$(__fzf_cd__)\e\C-e\er\C-m"'

#[...]

  ## CTRL-R - Paste the selected command from history into the command line
  #bind '"\C-r": "\eddi$(__fzf_history__)\C-x\C-e\C-x^\e$a\C-x\C-r"'
  #bind -m vi-command '"\C-r": "i\C-r"'

  ## ALT-C - cd into the selected directory
  #bind '"\ec": "\eddi$(__fzf_cd__)\C-x\C-e\C-x\C-r\C-m"'
  #bind -m vi-command '"\ec": "i\ec"'

#To:

  ## CTRL-O - Paste the selected command from history into the command line
  #bind '"\C-o": " \C-e\C-u$(__fzf_history__)\e\C-e\e^\er"'

  ## CTRL-] - cd into the selected directory
  #bind '"\C-]": " \C-e\C-u$(__fzf_cd__)\e\C-e\er\C-m"'

##[...]

  ## CTRL-O - Paste the selected command from history into the command line
  #bind '"\C-o": "\eddi$(__fzf_history__)\C-x\C-e\C-x^\e$a\C-x\C-r"'
  #bind -m vi-command '"\C-o": "i\C-o"'

  ## CTRL-] - cd into the selected directory
  #bind '"\C-]": "\eddi$(__fzf_cd__)\C-x\C-e\C-x\C-r\C-m"'
  #bind -m vi-command '"\C-]": "i\C-]"'

