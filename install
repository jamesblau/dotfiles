#!/bin/bash -xe

__deploy=( bash git inputrc python ruby tmux vim )

if [ -e ~/.not_a_server ]; then
  __deploy+=( ag i3 nvim tridactyl kitty Xresources )
else
  echo "Only installing for a server; otherwise, please touch .not_a_server in your home directory."
fi

cd ~
[ -L ~/bin ] && rm ~/bin
ln -s ~/dotfiles/bin bin

for dir in "${__deploy[@]}"; do
  for path in ~/dotfiles/"${dir}"/*; do
    file_name=`basename "${path}"`
    [ -L ."${file_name}" ] && rm ."${file_name}"
    ln -s "${path}" ."${file_name}"
  done
done

#Set HandlePowerKey=suspend in /etc/systemd/logind.conf

#Set GRUB_CMDLINE_LINUX_DEFAULT="quiet splash acpi_sleep=nonvs" in /etc/default/grub for hibernate (TODO: double-check this)

#In /etc/udev/rules.d/trackpoint.rules, put:
#ACTION=="add", SUBSYSTEM=="input", ATTR{name}=="TPPS/2 IBM TrackPoint", ATTR{device/sensitivity}="255", ATTR{device/speed}="255"<Paste>

#Add i3batwarn.sh to crontab every five minutes or so

#ln -s ~/.nvimrc .config/nvim/init.vim

# notes plugin:
  #ln -s ~/dotfiles/ftplugin .config/nvim/ftplugin
  #ln -s ~/dotfiles/ftplugin .vim/ftplugin

  #ln -s ~/dotfiles/ftdetect .config/nvim/ftdetect
  #ln -s ~/dotfiles/ftdetect .vim/ftdetect

  #ln -s ~/dotfiles/syntax .config/nvim/syntax
  #ln -s ~/dotfiles/syntax .vim/syntax

#ln -s ~/dotfiles/rofi/config .config/rofi/config
