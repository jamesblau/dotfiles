#!/bin/bash

[ $# -ne 1 ] && echo One argument... && exit 1

case $1 in
  wh) sudo ~/dotfiles/screenlayout/work.conf.sh ;;
  wv) sudo ~/dotfiles/screenlayout/work_vert.conf.sh ;;
  wp) sudo ~/dotfiles/screenlayout/work_port.conf.sh ;;
  hh) sudo ~/dotfiles/screenlayout/home.conf.sh ;;
  hv) sudo ~/dotfiles/screenlayout/home_vert.conf.sh ;;
  d) sudo ~/dotfiles/screenlayout/default.conf.sh ;;
  *) echo Invalid layout specified... ;;
esac

# UltraNav
sudo modprobe -r psmouse
sudo modprobe psmouse proto=auto

sleep 1.1

stick="AlpsPS/2 ALPS DualPoint Stick"
pad="AlpsPS/2 ALPS DualPoint TouchPad"

xinput set-prop "${stick}" "Evdev Wheel Emulation" 1
xinput set-prop "${stick}" "Evdev Wheel Emulation Axes" 6 7 4 5
xinput set-prop "${stick}" "Evdev Wheel Emulation Inertia" 2
xinput set-prop "${stick}" "Evdev Wheel Emulation Timeout" 200
xinput set-prop "${stick}" "Evdev Wheel Emulation Button" 2

xinput set-prop "${stick}" "Device Accel Profile" 2
xinput set-prop "${stick}" "Device Accel Constant Deceleration" .15
xinput set-prop "${stick}" "Device Accel Adaptive Deceleration" 20
xinput set-prop "${stick}" "Device Accel Velocity Scaling" .5

xinput set-prop "${pad}" "Synaptics Tap Time" 0
xinput set-prop "${pad}" "Synaptics Scrolling Distance" 50, 50
xinput set-prop "${pad}" "Synaptics Edge Scrolling" 0, 0, 0
xinput set-prop "${pad}" "Synaptics Two-Finger Scrolling" 1, 1
xinput set-prop "${pad}" "Synaptics Off" 0
#xinput set-prop "${pad}" "Synaptics Coasting Speed" 0 0

# Keyboard
sudo setxkbmap -option ctrl:nocaps
xmodmap -e "keycode  96 = F12 F12 Caps_Lock F12 F12 F12 XF86Switch_VT_12 F12 F12 XF86Switch_VT_12"

xmodmap -e "keysym Alt_R = Mode_switch"
xmodmap -e "keycode  43 = h H Left Left"
xmodmap -e "keycode  44 = j J Down Down"
xmodmap -e "keycode  45 = k K Up Up"
xmodmap -e "keycode  46 = l L Right Right"

xmodmap -e "keycode 107 = Super_L Super_R"
